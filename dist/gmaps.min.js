var GoogleMapView=function(){function t(o,e){this.container=o,this.autoInit=!0;for(var a in e)this[a]=e[a];t.isReady()?this._loaded():(t.loadWaiters.push(this),t.loadGoogleMaps())}return t.prototype._loaded=function(){console.log("loaded",this),this.autoInit&&this.init()},t.prototype.init=function(){console.log("init"),this.lastPosition=this.lastPosition||new google.maps.LatLng(0,0);var t={center:this.lastPosition,zoom:this.zoom||1,disableDefaultUI:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.container,t)},t.prototype.resize=function(){google.maps.event.trigger(this.map,"resize")},t.prototype.setPosition=function(t,o){var e;e=isNaN(t)?t:{lat:t,lng:o},this.lastPosition={lat:e.lat,lng:e.lng},this.map&&this.map.setCenter(this.lastPosition)},t.prototype.setZoom=function(t){this.zoom=t,this.map&&this.map.setZoom(t)},t.prototype.dispose=function(){},t.loadWaiters=[],t.state=0,t.loadGoogleMaps=function(o){if(t.updateState(),!(t.state>0)){var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?sensor=false&callback=GoogleMapView.mapLoaded"+(o?o:""),document.body.appendChild(e),t.state=1}},t.mapLoaded=function(){t.state=2,t.loadWaiters.forEach(function(t){t._loaded()}),t.loadWaiters=[]},t.updateState=function(){if(window.google&&window.google.maps)return void(t.state=2);for(var o=document.querySelectorAll("script"),e=0;e<o.length;e++)-1!=o[e].src.indexOf("maps.googleapis.com/maps/api/js")&&(t.state=1)},t.isReady=function(){return t.updateState(),2==t.state},t}(),gmaps=angular.module("gmaps",[]);gmaps.directive("mapview",function(){return{link:function(t,o,e){var a=e.mapview||"mapview",i=t[a]=new GoogleMapView(o[0]);for(var s in e)if(0==s.indexOf("map")){var n=s.substr(3);switch(n){case"zoom":i.setZoom(parseInt(e[s]));break;case"autoinit":i.autoInit="true"==e[s]?!0:!1}}t.$on("$destroy",function(){t[a].dispose()})},restrict:"A"}});